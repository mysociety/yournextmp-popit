# -*- mode: ruby -*-
# vi: set ft=ruby :

YNMP_VAGRANT_PORT = ENV['YNMP_VAGRANT_PORT'] || 8000
YNMP_VAGRANT_MEMORY = ENV['YNMP_VAGRANT_MEMORY'] || 1024

$post_up_message = "You can now ssh into your vagrant box: vagrant ssh

The website code is found in: /vagrant/yournextmp-popit

You can run the dev server with: python manage.py runserver 0.0.0.0:8000"


Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/trusty64"
  config.vm.network :forwarded_port, guest: 8000, host: YNMP_VAGRANT_PORT
  config.vm.synced_folder ".", "/home/vagrant/yournextmp", :owner => "vagrant", :group => "vagrant"

  config.vm.provider :virtualbox do |v|
    v.customize ["modifyvm", :id, "--memory", YNMP_VAGRANT_MEMORY]
  end

  config.vm.provision :shell,
    :path => "yournextmp-popit/conf/provision.sh",
    :privileged => false

  config.vm.post_up_message = $post_up_message
end
